
<!DOCTYPE html>

<html class="" lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <title>SecuritySearch</title>
  <link rel="stylesheet" type="text/css" media="screen" href="{{ url_for('static', filename='style.css') }}">
  <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
</head>

<body>
  <h1>Hello, world.</h1>
  <form action="search">
    <label for="query">Query:</label>
    <input type="text" id="q" name="q"
      {% if request.args.get('q') != None %}
        value="{{ request.args.get('q') }}"
      {% endif %}
    />
    <br/>
  </form>

  {% if 'q' in request.args %}
  <p/>
  Showing results for <b>{{ request.args.get('q')|e }}</b>:
  <p/>
  <i>none.</i>
  {% endif %}


  <script>
    var xmlhttp

    function updateResults() {
      if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        resp = JSON.parse(xmlhttp.responseText);
        document.getElementById("status.x").innerHTML = resp.position.retval.toString();
      }
    }

    function readStatus() {
      xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange = updateStatus;
      xmlhttp.open("GET", "api/status", true);
      //xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      xmlhttp.send();
    }

    //setTimeout (readStatus, 1000)

    </script>
</body>
</html> 
